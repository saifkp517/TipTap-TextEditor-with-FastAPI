{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///D:/editor/app/register/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, ChangeEvent } from \"react\";\r\nimport { auth } from \"@/lib/firebase\";\r\nimport {\r\n  createUserWithEmailAndPassword,\r\n  signOut,\r\n  UserCredential,\r\n} from \"firebase/auth\";\r\n\r\ntype UserData = {\r\n  email: string;\r\n  token: string;\r\n};\r\n\r\nexport default function RegisterPage() {\r\n  const [email, setEmail] = useState<string>(\"\");\r\n  const [password, setPassword] = useState<string>(\"\");\r\n  const [user, setUser] = useState<UserData | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const handleEmailChange = (e: ChangeEvent<HTMLInputElement>) =>\r\n    setEmail(e.target.value);\r\n\r\n  const handlePasswordChange = (e: ChangeEvent<HTMLInputElement>) =>\r\n    setPassword(e.target.value);\r\n\r\n  const registerWithEmail = async () => {\r\n    setError(null); // Clear any previous error\r\n    try {\r\n      const res: UserCredential = await createUserWithEmailAndPassword(\r\n        auth,\r\n        email,\r\n        password\r\n      );\r\n      const token = await res.user.getIdToken();\r\n      setUser({ email: res.user.email ?? \"\", token });\r\n      console.log(\"User registered:\", res.user.email);\r\n      window.location.href = \"/login\"; \r\n    } catch (err: unknown) {\r\n      if (err instanceof Error) {\r\n        setError(err.message);\r\n        console.error(\"Registration error:\", err.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    await signOut(auth);\r\n    setUser(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 max-w-md mx-auto\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">Register</h1>\r\n\r\n      {user ? (\r\n        <div>\r\n          <p>Welcome, {user.email}</p>\r\n          <button\r\n            onClick={handleLogout}\r\n            className=\"mt-4 px-4 py-2 bg-red-600 text-white rounded\"\r\n          >\r\n            Logout\r\n          </button>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          <input\r\n            type=\"email\"\r\n            placeholder=\"Email\"\r\n            className=\"w-full border p-2 mb-2 rounded\"\r\n            value={email}\r\n            onChange={handleEmailChange}\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n            className=\"w-full border p-2 mb-4 rounded\"\r\n            value={password}\r\n            onChange={handlePasswordChange}\r\n          />\r\n\r\n          {error && (\r\n            <p className=\"text-red-600 text-sm mb-2\">\r\n              Error: {error}\r\n            </p>\r\n          )}\r\n\r\n          <button\r\n            onClick={registerWithEmail}\r\n            className=\"w-full px-4 py-2 bg-blue-600 text-white rounded\"\r\n          >\r\n            Register\r\n          </button>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAAA;AAAA;AAJA;;;;;AAee,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IAC3C,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IACjD,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAmB;IAClD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAElD,MAAM,oBAAoB,CAAC,IACzB,SAAS,EAAE,MAAM,CAAC,KAAK;IAEzB,MAAM,uBAAuB,CAAC,IAC5B,YAAY,EAAE,MAAM,CAAC,KAAK;IAE5B,MAAM,oBAAoB;QACxB,SAAS,OAAO,2BAA2B;QAC3C,IAAI;YACF,MAAM,MAAsB,MAAM,CAAA,GAAA,qOAAA,CAAA,iCAA8B,AAAD,EAC7D,+GAAA,CAAA,OAAI,EACJ,OACA;YAEF,MAAM,QAAQ,MAAM,IAAI,IAAI,CAAC,UAAU;YACvC,QAAQ;gBAAE,OAAO,IAAI,IAAI,CAAC,KAAK,IAAI;gBAAI;YAAM;YAC7C,QAAQ,GAAG,CAAC,oBAAoB,IAAI,IAAI,CAAC,KAAK;YAC9C,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB,EAAE,OAAO,KAAc;YACrB,IAAI,eAAe,OAAO;gBACxB,SAAS,IAAI,OAAO;gBACpB,QAAQ,KAAK,CAAC,uBAAuB,IAAI,OAAO;YAClD;QACF;IACF;IAEA,MAAM,eAAe;QACnB,MAAM,CAAA,GAAA,6MAAA,CAAA,UAAO,AAAD,EAAE,+GAAA,CAAA,OAAI;QAClB,QAAQ;IACV;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAA0B;;;;;;YAEvC,qBACC,8OAAC;;kCACC,8OAAC;;4BAAE;4BAAU,KAAK,KAAK;;;;;;;kCACvB,8OAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;qCAKH;;kCACE,8OAAC;wBACC,MAAK;wBACL,aAAY;wBACZ,WAAU;wBACV,OAAO;wBACP,UAAU;;;;;;kCAEZ,8OAAC;wBACC,MAAK;wBACL,aAAY;wBACZ,WAAU;wBACV,OAAO;wBACP,UAAU;;;;;;oBAGX,uBACC,8OAAC;wBAAE,WAAU;;4BAA4B;4BAC/B;;;;;;;kCAIZ,8OAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;;;;AAOX","debugId":null}}]
}